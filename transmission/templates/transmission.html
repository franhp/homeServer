{% extends 'base.html' %}

{% block content %}
<div class="col-sm-12 col-md-7">
    <h1>Downloads<div class="pull-right"><button class="btn" onclick="location.reload();">Refresh</button> </div></h1>
    {% if torrents %}
        <table class="table table-striped">
            <thead><tr><th style="width:40%">Status (%)</th><th>Name</th><th>Remove</th></tr></thead>
            <tbody>
            {% for torrent in torrents %}
                {% if torrent.isFinished == True %}
                    <tr class="success">
                {% else %}
                    <tr class="error">
                {% endif %}
                    <td>    
                        <div class="progress">
                            <div class="progress-bar progress-bar-striped"
                                 role="progressbar"
                                 aria-valuenow="{{ torrent.progress|floatformat:2 }}"
                                 aria-valuemax="100"
                                 aria-valuemin="0"
                                 style="min-width: 2em;width: {{ torrent.progress|floatformat:2 }}%;">
                                {{ torrent.progress|floatformat:2 }}
                            </div>
                        </div>
                    </td>
                    <td>
                        <strong>{{ torrent.name }}</strong>
                    </td>
                    <td>
                        <form class="form-inline" method="post">
                            {% csrf_token %}
                            <input type="hidden" name="del" value="{{torrent.hashString}}">
                            <input type="submit" class="btn btn-danger" value="Remove">
                        </form>
                    </td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    {% else  %}
        <p>No torrents in the list </p>
    {% endif %}
</div>
<div class="col-sm-12 col-md-4">
    <h1> Add </h1>
    <form class="form-inline" method="post">
        {% csrf_token %}
        <input type="text" name="add" placeholder="URL" style="width:50%">
        <button type="submit" class="btn btn-success">Request Download</button>
    </form>
</div>
{% endblock %}