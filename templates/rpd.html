{% extends 'base.html' %}

{% block extra_head %}
        <link href="//vjs.zencdn.net/4.4/video-js.css" rel="stylesheet">
        <script src="//vjs.zencdn.net/4.4/video.js"></script>
{% endblock %}

{% block warnings %}
{% if move %}
<div class="alert"> <button type="button" class="close" data-dismiss="alert">&times;</button>
<strong>Moved!</strong> The file [ {{ move }} ] was moved to the downloads folder.</div>
{% endif %}

{% if delete %}
<div class="alert alert-error"> <button type="button" class="close" data-dismiss="alert">&times;</button>
<strong>Deleted!</strong> The file [ {{ delete }} ] was deleted forever.</div>
{% endif %}

{% endblock %}

{% block content %}

<div class="row-fluid">
    <div class="span2">
        <h1>Ranking</h1>
        <ol>
        {% for word, ratio in words %}
            {% if word %}
                <li>
                    {% if ratio >= 10 %}
                        <span class="label label-important">
                    {% elif ratio >= 5 %}
                        <span class="label label-warning">
                    {% else %}
                        <span class="label">
                    {% endif %}{{ ratio }}</span> 
                {{ word|lower|title }}</li>
            {% endif %}
        {% endfor %}
        </ol>
    </div> <!-- rankings -->
    <div class="span10">
        <h1>List</h1>
        {% for rating, short, video, thumbnails, id in library %}
            <div class="span5">
                <h5>
                    {% if rating >= 10 %}
                        <span class="badge badge-important">
                    {% elif rating >= 5 %}
                        <span class="badge badge-warning">
                    {% else %}
                        <span class="badge">
                    {% endif %}
                    {{rating}}
                    </span>
                    <a href="#" alt="{{short}}">{{ short|slice:":20" }}...</a>
                </h5>

                <video id="test" class="video-js vjs-default-skin"
                  controls preload="auto" width="320" height="132"
                  poster="{{STATIC_URL}}thumbnails/{{thumbnails.0}}"
                  data-setup='{"controls": true, "autoplay": false, "preload": "auto"}'>
                 <source src="{{ STATIC_URL }}videos/random/{{ short }}" type='video/{{ short|slice:"-3:"}}' />
                </video>


                <div class="row-fluid">
                    <div class="span1">
                        <form method="post">
                            {% csrf_token %}
                            <input type="hidden" name="video" value="{{ video }}">
                            <input type="hidden" name="short" value="{{ short }}">
                            <input type="submit" class="btn btn-primary" value="Keep this video">
                        </form>
                    </div>
                    <div class="span1 offset4">
                        <form method="post">
                            {% csrf_token %}
                            <input type="hidden" name="delete" value="{{ video }}">
                            <input type="hidden" name="short" value="{{ short }}">
                            <input type="submit" class="btn btn-danger" value="Delete it">
                        </form>
                    </div> <!-- second form -->
                </div> <!-- buttons row -->
            </div> <!-- carousel -->
        {% endfor %}
    </div> <!-- carousels box -->
</div> <!-- row -->
{% endblock %}

{% block extra_javascript %}
<script type="text/javascript">

</script>

{% endblock %}